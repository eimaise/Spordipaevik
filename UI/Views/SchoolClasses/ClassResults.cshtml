@using Microsoft.EntityFrameworkCore
@model WebApplication2.Controllers.ClassResultVm

@{
    ViewData["Title"] = "Harjutused";
}

<div id="container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>

@* <div id="container" style="min-width: 310px; height: 400px; margin: 0 auto"></div> *@
<table  class="table table-striped table-bordered nowrap" style="width: 100%">
    <thead>
    <tr>
        <th>Kuupäev</th>
        <th>Tulemused</th>
    </tr>
    </thead>
    <tbody>
    @foreach (var date in Model.Dates)
    {
        <tr>
            <td>
                <p>@date.Date.ToShortDateString()</p>

            </td>
            <td>
                <a class="btn btn-primary" href="@Url.Action("ResultInDay", new {date = @date.Date, exerciseId = @Model.SelectedExerciseId, ClassId = @Model.ClassId})">Vaata </a>

            </td>
        </tr>
    }
    </tbody>
</table>
@* @foreach (var date in Model.Dates) *@
@* { *@
@*     <p>@date.Date.ToShortDateString()</p> *@
@*     <a class="btn btn-primary" href="@Url.Action("ResultInDay", new {date = @date.Date, exerciseId = @Model.SelectedExerciseId, ClassId = @Model.ClassId})">Vaata </a> *@
@* } *@


@* *@
@* <table  class="table table-striped table-bordered nowrap" style="width: 100%"> *@
@*     <thead> *@
@*     <tr> *@
@*         <th>Poisid</th> *@
@*         <th>Tüdrukud</th> *@
@*     </tr> *@
@*     </thead> *@
@*     <tbody> *@
@*     @foreach (var schoolClass in Model.) *@
@*     { *@
@*         <tr> *@
@*             <td> *@
@*                 <form asp-action="ExerciseList"  method="get"> *@
@*                     <input type="hidden" name="gender" value="@manId"/> *@
@*                     <input type="hidden" name="classId" value="@schoolClass.Id"/> *@
@*                     <button style="margin-top: 10px" class="btn btn-primary" type="submit">@schoolClass.Name</button> *@
@*                 </form> *@
@*             </td> *@
@*             <td> *@
@* *@
@*                 <form asp-action="ExerciseList" method="get"> *@
@*                     <input type="hidden" name="gender" value="@womanId"/> *@
@*                     <input type="hidden" name="classId" value="@schoolClass.Id"/> *@
@*                     <button style="margin-top: 10px"class="btn btn-primary" type="submit">@schoolClass.Name </button> *@
@*                 </form> *@
@*             </td> *@
@*         </tr> *@
@*     } *@
@*     </tbody> *@
@* </table> *@
<script>
    $(function() {
        console.log( "ready!" );
        $.getJSON("/SchoolClasses/GetData", {
                classId:"@Model.ClassId",
                exerciseId:"@Model.SelectedExerciseId"
        },
            function(data) {
                var chart =  Highcharts.chart('container',
                    {
                        chart: {
                            type: 'line'
                        },
                        title: {
                            text: data.exerciseName
                        },
                        subtitle: {
                            text: ''
                        },
                        xAxis: {
                            categories: data.dates
                        },
                        yAxis: {
                            title: {
                                text: data.unit
                            }
                        },
                        plotOptions: {
                            line: {
                                dataLabels: {
                                    enabled: true
                                },
                                enableMouseTracking: true
                            }
                        }
                    });
                for (var i = 0; i < data.tulemused.names.length; i++) {
                    chart.addSeries({                        
                        name: data.tulemused.names[i],
                        data: data.tulemused.values[i]
                    },false);
                }
                chart.redraw(); 
            });

    });
</script>

